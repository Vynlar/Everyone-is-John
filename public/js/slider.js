// Generated by CoffeeScript 1.10.0
(function() {
  var bidButton, currentBid, denyBid, drawSlider, ln, lock, tmp, willpower;

  willpower = 10;

  lock = false;

  ln = -1;

  tmp = 10;

  currentBid = -1;

  bidButton = document.querySelector('#bidButton');

  drawSlider = function() {
    var button, container, height, i, n, numButtons, slider;
    slider = document.querySelector('#sliderButtons');
    console.log(slider.offsetHeight);
    numButtons = willpower > 10 ? willpower : 10;
    height = slider.offsetHeight / (numButtons + 1);
    slider.innerHTML = '';
    if (willpower > 10) {
      tmp = willpower;
    }
    i = 0;
    while (i <= tmp) {
      container = document.createElement('li');
      button = document.createElement('a');
      container.style.height = height + 'px';
      container.setAttribute('class', 'pixelbutton');
      button.innerText = tmp - i;
      button.setAttribute('class', 'button special');
      if (tmp - i > willpower) {
        button.style.background = 'rgb(171, 171, 171)';
        button.setAttribute('data-disabled', 'true');
      } else {
        n = tmp - i;
        button.style.background = (function() {
          var hue;
          hue = ((1 - (n / willpower)) * 120).toString(10);
          return ['hsl(', hue, ',25%,50%)'].join('');
        })();
        button.setAttribute('data-disabled', 'false');
      }
      button.setAttribute('data-power', tmp - i);
      button.addEventListener('mouseenter', function() {
        var n;
        var i;
        if (lock || this.getAttribute('data-disabled') === 'true') {
          return;
        }
        i = 0;
        while (i <= parseInt(this.getAttribute('data-power'))) {
          n = willpower - i;
          document.querySelector('[data-power="' + i + '"]').style.background = (function() {
            var hue;
            hue = (n / willpower * 120).toString(10);
            return ['hsl(', hue, ',75%,50%)'].join('');
          })();
          i++;
        }
      });
      button.addEventListener('mouseleave', function() {
        var n;
        var i;
        if (lock || this.getAttribute('data-disabled') === 'true') {
          return;
        }
        i = 0;
        while (i <= willpower) {
          n = willpower - i;
          document.querySelector('[data-power="' + i + '"]').style.background = (function() {
            var hue;
            hue = (n / willpower * 120).toString(10);
            return ['hsl(', hue, ',25%,50%)'].join('');
          })();
          i++;
        }
      });
      button.addEventListener('click', function() {
        var n;
        var i;
        if (this.getAttribute('data-disabled') === 'true') {
          return;
        }
        i = 0;
        while (i <= willpower) {
          n = willpower - i;
          document.querySelector('[data-power="' + i + '"]').style.background = (function() {
            var n;
            var i;
            var hue;
            hue = (n / willpower * 120).toString(10);
            return ['hsl(', hue, ',25%,50%)'].join('');
          })();
          i++;
        }
        while (i <= parseInt(this.getAttribute('data-power'))) {
          n = willpower - i;
          document.querySelector('[data-power="' + i + '"]').style.background = (function() {
            var n;
            var i;
            var hue;
            hue = (n / willpower * 120).toString(10);
            return ['hsl(', hue, ',75%,50%)'].join('');
          })();
          i++;
        }
        while (i <= willpower) {
          n = willpower - i;
          document.querySelector('[data-power="' + i + '"]').style.background = (function() {
            var hue;
            hue = (n / willpower * 120).toString(10);
            return ['hsl(', hue, ',25%,50%)'].join('');
          })();
          i++;
        }
        lock = true;
        currentBid = parseInt(this.getAttribute('data-power'));
        bidButton.innerText = 'Bid ' + parseInt(this.getAttribute('data-power')) + ' Willpower';
      });
      container.appendChild(button);
      slider.appendChild(container);
      i++;
    }
  };

  denyBid = function(bid) {
    return bid;
  };

  document.addEventListener('DOMContentLoaded', function() {
    drawSlider();
    bidButton.addEventListener('click', function() {
      if (currentBid < 0 || currentBid > willpower) {
        denyBid(currentBid);
      }
      return socket.emit("bid", {
        bid: currentBid
      });
    });
  });

}).call(this);
